@model string
@{
    // for clarity
    string FieldPrefix = Model;
    string ngRequired = string.Format("LoanAcceptance.NonAppSpouseData.{0}.HasNonApplicantSpouse && !LoanAcceptance.NonAppSpouseData.{0}.SpouseNotInState", FieldPrefix);
    string ngDisabled = string.Format("LoanAcceptance.NonAppSpouseData.{0}.SpouseNotInState", FieldPrefix);
    string ngAddressDisabled = string.Format("LoanAcceptance.NonAppSpouseData.{0}.SpouseNotInState || LoanAcceptance.NonAppSpouseData.{0}.SameAddress", FieldPrefix);
}

<div class="row">
    <div class="medium-4 columns">
        <p><strong class="brand">{{LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Title}}</strong> </p>
    </div>
    <div class="medium-8 columns">
        <label class="not-in-state"><input type="checkbox" runat="server" ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).SpouseNotInState" /> Spouse does not reside in Wisconsin</label>
    </div>
</div>
<div class="row">
    <div class="medium-3 columns">
        <label>First</label>
        <input id="@(FieldPrefix)FirstName" type="text" 
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Name.First" 
            ng-disabled="@ngDisabled"
            ls-restrict-to-pattern ng-pattern="/^[A-Za-z\' \.]+$/" 
            maxlength="30" 
            ng-required="@ngRequired"
            ls-proper-case="true">    
    </div>
    <div class="medium-1 columns">
        <label>MI</label>
        <input id="@(FieldPrefix)MI" type="text" 
            ng-disabled="@ngDisabled"
            maxlength="1" 
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Name.MI" 
            ls-restrict-to-pattern ls-proper-case="upper"
            ng-pattern="/[A-Za-z]/">    
    </div>
    <div class="medium-3 columns medium-pull-5">
        <label>Last</label>
        <input id="@(FieldPrefix)LastName" type="text" 
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Name.Last" 
            ng-disabled="@ngDisabled"
            ls-restrict-to-pattern ng-pattern="/^[A-Za-z\' \.]+$/" 
            maxlength="30" 
            ng-required="@ngRequired"
            ls-proper-case="true"
            >    
    </div>
</div>

<div class="row">
    <div class="medium-3 columns">
        <p><strong>Spouse's Mailing Address </strong></p>
    </div>
    <div class="medium-9 columns">
        <label><input type="checkbox" ng-disabled="@ngDisabled" ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).SameAddress" /> Same Address as {{LoanAcceptance.NonAppSpouseData.@(FieldPrefix).ApplicantName}}</label>
    </div>
</div>

<div class="row">                
    <div class="medium-4 columns">
        <label>Street Address</label>
        <input id="@(FieldPrefix)HomeStreetAddress" type="text" 
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Address.AddressLine" 
            ng-required="@ngRequired"
            ng-disabled="@ngAddressDisabled"
            maxlength="50"
            ls-proper-case="true"
            >    
    </div>
    <div class="medium-2 columns">
        <label>Apt, etc.</label>
        @(Html.NgDropDownSelectList(
            "LoanAcceptance.NonAppSpouseData." + FieldPrefix + ".Address.SecondaryUnitType", 
            FieldPrefix + "SecondaryUnitType", 
            "Select unit type.",
            FirstAgain.Domain.Lookups.FirstLook.PostalAddressSecondaryUnitTypeLookup.GetFilteredList(FirstAgain.Domain.Lookups.FirstLook.PostalAddressSecondaryUnitTypeLookup.FilterType.Home),
            string.Format("(({0}) && LoanAcceptance.NonAppSpouseData.{1}.Address.SecondaryUnitValue && NonAppSpouseData.{1}.Address.SecondaryUnitValue.length) && !({2})", ngRequired, FieldPrefix, ngAddressDisabled),
            new { 
                @ng_disabled = ngAddressDisabled
            }
            ))
    </div>
    <div class="medium-2 columns medium-pull-4">
        <label>&nbsp;</label>
        <input id="@(FieldPrefix)SecondaryUnitValue" type="text" 
            maxlength="10"
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Address.SecondaryUnitValue" 
            ng-required="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Address.SecondaryUnitType && LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Address.SecondaryUnitType != 'NotSelected'"
            ng-disabled="@ngAddressDisabled"
            />    
    </div>
</div>
<div class="row">                
    <div class="medium-4 columns">
        <label>City</label>
        <input type="text" 
            id="@(FieldPrefix)City" 
            ng-model="LoanAcceptance.NonAppSpouseData.@(FieldPrefix).Address.City" 
            maxlength="50" ls-proper-case="true"
            ng-disabled="@ngAddressDisabled"
            ng-required="@ngRequired"
            class="textBox"
            required>    
        </div>
    <div class="medium-2 columns">
        <label>State</label>

        @(Html.NgDropDownSelectList(
                ngModel: "LoanAcceptance.NonAppSpouseData." + FieldPrefix + ".Address.State", 
                name: FieldPrefix + "State",
                ariaLabel: "Select state.",
                ngRequired: ngRequired,
                valueList: FirstAgain.Domain.Lookups.FirstLook.StateLookup.GetFilteredBindingSource(FirstAgain.Domain.Lookups.FirstLook.StateLookup.FilterType.Employer),
                attributes: new { @ng_disabled = ngAddressDisabled }))
    </div>
    <div class="medium-2 columns medium-pull-4">
        <label>Zip Code</label>
        @LSForm.ZipCode(nameAndId: FieldPrefix + "ZipCode", 
                        ngModel: "LoanAcceptance.NonAppSpouseData." + FieldPrefix + ".Address.ZipCode", 
                        ariaLabel: "Enter zip zode.",
                        ngRequired: ngRequired,
                        ngDisabled: ngAddressDisabled)

    </div>
</div>

